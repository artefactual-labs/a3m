=========
Changelog
=========

..
   All enhancements and patches to scriv will be documented
   in this file.  It adheres to the structure of http://keepachangelog.com/ ,
   but in reStructuredText instead of Markdown (for ease of incorporation into
   Sphinx documentation and the PyPI description).

   This project adheres to Semantic Versioning (http://semver.org/).

Unreleased
==========

See the fragment files in the `changelog.d directory`_.

.. _changelog.d directory: https://github.com/artefactual-labs/a3m/tree/master/changelog.d

.. scriv-insert-here

.. _changelog-0.7.1:

0.7.1 — 2023-10-30
==================

Fixed
-----

- Fix issue in the setuptools package discovery configuration introduced in the
  migration to ``pyproject.toml``.

.. _changelog-0.7.0:

0.7.0 — 2023-10-28
==================

Removed
-------

- Remove unused dependency: vcrpy.
- Remove ``externals`` (fiwalk extension for ISO disk images).
- Remove virus scanning capabilities.
- Remove UUID log files that were included in AIPs.
- Remove ``null`` values from the JSON-encoded workflow, reducing the size of
  the default workflow document significantly.

Added
-----

- Add scriv to manage our changelog.
- Add pyright, another static type checker that integrates well with Visual
  Studio Code. We should remove mypy at some point.
- Add django-types, type stubs for Django compatible with pyright.
- Add ``make workflow`` to render the current workflow in the browser using
  the latest version of amflow available.
- Add ``tox -e publish`` to build and publish the packages to PyPI.

Changed
-------

- Add time precision to values written to ``premis:dateCreatedByApplication``.
- Bump supported versions of Python to 3.11 and 3.12.
- Ruff is now used for linting and formatting, replacing flake8, black or
  pyupgrade. More tools may be removed as the Ruff team adds more features,
  e.g. bandit, vulture...
- The project has been migrated to ``pyproject.toml`` entirely, ``setup.cfg``
  and ``setup.py`` were removed, as well as other configuration files like
  ``tox.ini``, ``pytest.ini`` or ``.bandit``.
- Multiple improvements in CI, e.g.: image caching for faster builds, use of
  ``.python-version``, combined coverage data across multiple Python versions,
  use of tox without Docker for unit testing.
- ``fpr`` is not a Django app anymore but a standard Python package with new
  abstractions to load rules directly from JSON-encoded documents generated by
  Archivematica. Fetching new rules from Archivematica is now easier, see
  :doc:`contributing` for more. This change allows for future developments
  where multiple ``fpr`` could be supported.

Fixed
-----

- The Docker image is now built using ``requirements.txt`` instead of
  ``requirements-dev.txt`` and uses ``.python-version`` to find the default
  Python version preferred by the project.
- Twine now uses ``.pypirc`` for credentials.
- The docs site now shows the last known release version using
  ``git describe --tags --abbrev=0`` as opposed to relying on
  ``a3m.__version__``. This ensures that the docs site shows the latest
  published release as opposed to the latest release in development.

.. _changelog-0.6.0:

0.6.0 — 2023-09-19
==================

.. _changelog-0.5.0:

0.5.0 — 2020-10-27
==================

.. _changelog-0.4.0:

0.4.0 — 2020-10-20
==================

.. _changelog-0.3.1:

0.3.1 — 2020-08-26
==================

.. _changelog-0.3.0:

0.3.0 — 2020-08-26
==================

.. _changelog-0.2.1:

0.2.1 — 2020-08-24
==================

.. _changelog-0.2.0:

0.2.0 — 2020-08-24
==================

.. _changelog-0.1.0:

0.1.0 — 2020-05-31
==================
